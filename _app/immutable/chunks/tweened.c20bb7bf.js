import{w as j}from"./index.5e192797.js";import{C as g,L as C}from"./scheduler.a7cd560e.js";import{n as O,l as P}from"./index.396264e7.js";import{i as w}from"./utils.23a110f2.js";function u(t,r){if(t===r||t!==t)return()=>t;const s=typeof t;if(s!==typeof r||Array.isArray(t)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=r.map((o,e)=>u(t[e],o));return o=>i.map(e=>e(o))}if(s==="object"){if(!t||!r)throw new Error("Object cannot be null");if(w(t)&&w(r)){t=t.getTime(),r=r.getTime();const e=r-t;return n=>new Date(t+n*e)}const i=Object.keys(r),o={};return i.forEach(e=>{o[e]=u(t[e],r[e])}),e=>{const n={};return i.forEach(f=>{n[f]=o[f](e)}),n}}if(s==="number"){const i=r-t;return o=>t+o*i}throw new Error(`Cannot interpolate ${s} values`)}function D(t,r={}){const s=j(t);let i,o=t;function e(n,f){if(t==null)return s.set(t=n),Promise.resolve();o=n;let c=i,l=!1,{delay:A=0,duration:p=400,easing:h=C,interpolate:E=u}=g(g({},r),f);if(p===0)return c&&(c.abort(),c=null),s.set(t=o),Promise.resolve();const a=O()+A;let m;return i=P(y=>{if(y<a)return!0;l||(m=E(t,n),typeof p=="function"&&(p=p(t,n)),l=!0),c&&(c.abort(),c=null);const d=y-a;return d>p?(s.set(t=n),!1):(s.set(t=m(h(d/p))),!0)}),i.promise}return{set:e,update:(n,f)=>e(n(o,t),f),subscribe:s.subscribe}}export{D as t};
